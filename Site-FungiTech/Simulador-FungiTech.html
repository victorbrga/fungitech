<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Link para o CSS-->
    <link rel="stylesheet" href="CSS-FungiTech.css">

    <!--Link para a fonte importada da Google-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <title>FungiTech | Simulador</title>
</head>

<body class="simulador">

    <!--Header-->
    <header class="header">
        <div>
            <div> <!--Logo da Empresa-->
                <a href="HomePage-FungiTech.html"> <img class="logo" src="img/LogoFungiTech3.png" alt="Logo FungiTech">
                </a>
            </div>

            <div class="link"> <!--Ir para página inicial-->
                <a href="HomePage-FungiTech.html">Inicio</a>
            </div>

            <div class="link"> <!--Ir para o simulador financeiro-->
                <a href="Simulador-FungiTech.html">Simulador</a>
            </div>

            <div class="link"> <!--Ir para Tela de Cadastro-->
                <a href="Cadastro-FungiTech.html">Cadastre-se</a>
            </div>

            <div class="link"> <!--Ir para Tela de Login-->
                <a href="Login-FungiTech.html">Entrar</a>
            </div>
        </div>
    </header>

    <!--Conteúdo do Site-->
    <center>
        <div class="calculadora">
            <h1>Simulador Financeiro FungiTech</h1>
           Kilos mensais produzidos:<input type="number" id="inputProducaoCliente" placeholder="Produção mensal (em kg)"> <br>
            Qual é o preço por Kilo: <input type="number" id="inputPrecoKiloCliente" placeholder="Preço por (Kg)"> <br>
      
            Qual é a perda percentual da produção: <input type="number" id="inputPercentualPerdaCliente"
                placeholder="Perda Percentual mensal (%)"><br>

            <button onclick="calcular()">Calcular</button>
        </div>
        <div class="mensagem">
            <div class="msg1" id="mensagemMercado" class="resultado"></div>
            <div class="msg2" id="mensagemCliente" class="resultado"></div>
            <div class="msg3" id="mensagemComparacao" class="resultado"></div>
            <div class="msg4" id="mensagemTrimestral" class="resultado"></div>
        </div>
    </center>



    <!--Footer-->
    <footer>
        <div class="home_footer">
            <p> © Copyright FungiTech - 2024. Todos os direitos reservados</p>
        </div>
    </footer>

</body>

</html>

<script>
    function calcular() {
        // Declaração de Variaveis das Inputs
        var producaoCliente = Number(inputProducaoCliente.value); // Produção mensal do produtor de cogumelo
        var precoKiloCliente = Number(inputPrecoKiloCliente.value); // Preço que o cliente vende por kilo do cogumelo
        var percentualPerdaCliente = (Number(inputPercentualPerdaCliente.value) / 100 ); // Perda percentual do produtor

        // Criaçãop de variaveis para contas (Mercado)
        var precoKiloMercado = 27;
        var percentualPerdaMercado = 0.2;
        var lucroBrutoMensalMercado = precoKiloMercado * producaoCliente;
        var lucroLiquidoMensalMercado = lucroBrutoMensalMercado * (1 - percentualPerdaMercado);
        var lucroBrutoAnualMercado = lucroBrutoMensalMercado * 12;
        var lucroLiquidoAnualMercado = lucroLiquidoMensalMercado * 12;

        // Criaçãop de variaveis para contas (Cliente)
        var lucroBrutoMensalCliente = precoKiloCliente * producaoCliente;
        var lucroLiquidoMensalCliente = lucroBrutoMensalCliente * (1 - percentualPerdaCliente);
        var lucroBrutoAnualCliente = lucroBrutoMensalCliente * 12;
        var lucroLiquidoAnualCliente = lucroLiquidoMensalCliente * 12;

        // Criação das variáveis para comparação
        var perda = percentualPerdaCliente / percentualPerdaMercado;
        var lucro = lucroLiquidoMensalCliente / lucroLiquidoMensalMercado;

        // Criação das variáveis com FOR 
        
        
        if (producaoCliente <= 0 || precoKiloCliente <= 0 || percentualPerdaCliente <= 0) {
            alert('Por Favor, preencha todos os campos com valores válidos para continuar!')
        } else {
            // Mensagem Mercado
            mensagemMercado.innerHTML = `<h3>Valores do Mercado:</h3>` + `Preço por kilo: <b>R$${precoKiloMercado}</b><br><br>
            Perda Percentual: <b>${percentualPerdaMercado * 100}%</b> <br><br>
            Quantidade de cogumelos vendidos: <b>${producaoCliente} cogumelos</b> <br><br>
            Lucro bruto mensal: <b>R$${lucroBrutoMensalMercado.toFixed(2)}</b> <br><br>
            Lucro líquido mensal:<b> R$${lucroLiquidoMensalMercado.toFixed(2)}</b> <br><br>
            Lucro bruto anual: <b>R$${lucroBrutoAnualMercado.toFixed(2)}</b> <br><br>
            Lucro líquido anual: <b>R$${lucroLiquidoAnualMercado.toFixed(2)}</b>`
            
            // Mensagem do Cliente
            mensagemCliente.innerHTML = `<h3>Valores do Cliente</h3>` + `Preço por kilo: <b>R$${precoKiloCliente}</b><br><br>
            Perda Percentual: <b>${percentualPerdaCliente * 100}%</b> <br><br>
            Quantidade de cogumelos vendidos: <b>${producaoCliente} cogumelos</b> <br><br>
            Lucro bruto mensal: <b>R$${lucroBrutoMensalCliente.toFixed(2)}</b> <br><br>
            Lucro líquido mensal: <b>R$${lucroLiquidoMensalCliente.toFixed(2)}</b> <br><br>
            Lucro bruto anual: <b>R$${lucroBrutoAnualCliente.toFixed(2)}</b> <br><br>
            Lucro líquido anual: <b>R$${lucroLiquidoAnualCliente.toFixed(2)}</b>`

            // Mensagem comparação
            var mensagemPerda = ``;
            var mensagemLucro = ``;

            if(percentualPerdaCliente < percentualPerdaMercado){
                mensagemPerda += ` <h4 class="positivo">Sua perda foi menor que a do mercado em ${(perda * 100).toFixed(2)}%</h4><br><br><br>`
            } else if (percentualPerdaCliente > percentualPerdaMercado){
                mensagemPerda += ` <h4 class="negativo">Sua perda foi maior que a do mercado em ${(perda * 100).toFixed(2)}%</h4><br><br><br>`
            } else {
                mensagemPerda = `<b>igual a</b>`
            }
            mensagemComparacao.innerHTML += `<h3>Comparação ao Mercado </h3> <br><br><br>${mensagemPerda}`
            
            if(lucroLiquidoMensalCliente < lucroLiquidoMensalMercado){
                mensagemLucro = ` <h4 class="positivo">Seu lucro foi menor que o do mercado em ${(lucro * 100).toFixed(2)}%</h4><br><br><br>`
            } else if (lucroLiquidoMensalCliente > lucroLiquidoMensalMercado){
                mensagemLucro = ` <h4 class="negativo">Seu lucro foi maior que o do mercado em ${(lucro * 100).toFixed(2)}%</h4><br><br><br>`
            } else {
                mensagemLucro = `<b>igual a</b>`
            }
            mensagemComparacao.innerHTML += `${mensagemLucro}`

            
            //Calculo Trimestrl
            mensagemTrimestral.innerHTML = `<h3> Valor Trimestral: </h3>`;
            var perdaTotal = 0;
            var gastoInicial = producaoCliente * 3; // gasto ao primeiro trimestre valor estipulado
            var incrementoGasto = percentualPerdaCliente * 20; // incremento de 20% de perda a cada bimestre
            var contGasto = 0;


            for (var tri = 1; tri <= 4; tri++) {
                var gastoTrimestral = gastoInicial + (tri - 1) * incrementoGasto; // calcula o gasto do trimestre atual
                mensagemTrimestral.innerHTML += `<p> Ao <b>${tri}º trimestre </b> o gasto <br> foi de <b>R$${gastoTrimestral.toFixed(2)}</b> <br></p>`;
                contGasto += gastoTrimestral; //calcula a perda trimestral e soma a perda total
                
        

            }
            
            mensagemTrimestral.innerHTML += `<p>Totalizando uma <br> <b>perda anual de R$${contGasto}</b>! </p>`;
            
        }
        }
</script>